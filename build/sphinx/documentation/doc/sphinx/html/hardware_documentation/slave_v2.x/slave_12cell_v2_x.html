

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>3. Slave 12-Cell v2.x.x &mdash; foxBMS 1.0 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../../_static/foxbms-icon.ico"/>
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../../genindex.html"/>
        <link rel="search" title="Search" href="../../search.html"/>
    <link rel="top" title="foxBMS 1.0 documentation" href="../../index.html"/>
        <link rel="next" title="4. Slave 12-Cell v1.x.x" href="../slave_v1.x/slave_12cell_v1_x.html"/>
        <link rel="prev" title="2. Hardware Overview" href="../overview/overview.html"/> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html" class="icon icon-home"> foxBMS
          

          
            
            <img src="../../_static/foxbms250px.png" class="logo" />
          
          </a>

          
            
            
              <div class="version">
                1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">General Information</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../general_information/releases/releases.html">1. Releases</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../general_information/roadmap/roadmap.html">2. Roadmap</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../general_information/overview/overview.html">3. Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../general_information/motivation/motivation.html">4. Motivation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../general_information/safety/safety.html">5. Safety</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../general_information/licenses/licenses.html">6. Licenses</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../general_information/team/team.html">7. Team</a></li>
</ul>
<p class="caption"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../getting_started/general/general.html">1. Getting Started with foxBMS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_started/foxconda/foxconda.html">2. Installing foxConda</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_started/build/build.html">3. Building the foxBMS Software and Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_started/eclipse_workspace/eclipse_workspace.html">4. Eclipse Workspace Setup and Flashing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_started/cabling/cabling.html">5. Cabling foxBMS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_started/connectors/connectors.html">6. Connectors Pinout</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_started/communicating/communicating.html">7. Communicating with foxBMS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_started/checking/checking.html">8. Checking-up foxBMS</a></li>
</ul>
<p class="caption"><span class="caption-text">Hardware Documentation</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../specifications/specifications.html">1. Hardware Specifications</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overview/overview.html">2. Hardware Overview</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">3. Slave 12-Cell v2.x.x</a></li>
<li class="toctree-l1"><a class="reference internal" href="../slave_v1.x/slave_12cell_v1_x.html">4. Slave 12-Cell v1.x.x</a></li>
<li class="toctree-l1"><a class="reference internal" href="../design_resources/design_resources.html">5. Hardware Design Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../components/components.html">6. Hardware Safety Components</a></li>
<li class="toctree-l1"><a class="reference internal" href="../bjb/bjb.html">7. Battery Junction Box</a></li>
<li class="toctree-l1"><a class="reference internal" href="../toolchain/toolchain.html">8. Hardware Toolchain</a></li>
</ul>
<p class="caption"><span class="caption-text">Software Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../software_documentation/components/components.html">1. Software Components</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../software_documentation/overview/overview.html">2. Software Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../software_documentation/defines/defines.html">3. Important Switches in Code</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../software_documentation/modules/modules.html">4. Software Modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../software_documentation/tools/tools.html">5. Software Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../software_documentation/build-process/build-process.html">6. Build Process</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../software_documentation/styleguide/styleguide.html">7. Software Style Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../software_documentation/faq/faq.html">8. Software FAQ and HOWTOs</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">foxBMS</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
      <li>3. Slave 12-Cell v2.x.x</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/hardware_documentation/slave_v2.x/slave_12cell_v2_x.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="slave-12-cell-v2-x-x">
<span id="hw-slave-12cell-v2-x"></span><h1>3. Slave 12-Cell v2.x.x<a class="headerlink" href="#slave-12-cell-v2-x-x" title="Permalink to this headline">¶</a></h1>
<div class="section" id="overview">
<h2>3.1. Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The following description only applies for the BMS-Slave Board hardware versions <code class="docutils literal"><span class="pre">2.0.3</span></code> and above.</p>
</div>
<div class="section" id="block-diagram">
<h3>3.1.1. Block Diagram<a class="headerlink" href="#block-diagram" title="Permalink to this headline">¶</a></h3>
<div class="figure" id="id1">
<span id="bms-slave-12cell"></span><a class="reference internal image-reference" href="../../_images/foxbms-slave-block-12cell.png"><img alt="../../_images/foxbms-slave-block-12cell.png" src="../../_images/foxbms-slave-block-12cell.png" style="width: 100%;" /></a>
<p class="caption"><span class="caption-number">Fig. 3.1 </span><span class="caption-text">BMS-Slave Board 12-Cell Block Diagram</span></p>
</div>
</div>
<div class="section" id="schematic-and-board-layout">
<h3>3.1.2. Schematic and Board Layout<a class="headerlink" href="#schematic-and-board-layout" title="Permalink to this headline">¶</a></h3>
<p>More information about the board schematic and layout files can be found in section <a class="reference internal" href="../design_resources/design_resources.html#hardware-design-resources"><span class="std std-ref">Hardware Design Resources</span></a>.</p>
</div>
</div>
<div class="section" id="functions">
<h2>3.2. Functions<a class="headerlink" href="#functions" title="Permalink to this headline">¶</a></h2>
<p>The following general description applies to both, the primary and the secondary of the BMS-Slave Board. If there are any differences in hardware between the primary and the secondary they will be marked as such.</p>
<div class="section" id="cell-voltage-measurement">
<h3>3.2.1. Cell Voltage Measurement<a class="headerlink" href="#cell-voltage-measurement" title="Permalink to this headline">¶</a></h3>
<p>The cell voltage sense lines are input on the connector X1503. The pinout is described in the table below.</p>
<div class="figure">
<a class="reference internal image-reference" href="../../_images/twentyfourcon.png"><img alt="../../_images/twentyfourcon.png" src="../../_images/twentyfourcon.png" style="width: 50%;" /></a>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="6%" />
<col width="21%" />
<col width="19%" />
<col width="53%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Pin</th>
<th class="head">Signal</th>
<th class="head">Direction</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>1</td>
<td>VBAT-</td>
<td>Input</td>
<td>Battery module negative terminal</td>
</tr>
<tr class="row-odd"><td>2</td>
<td>CELL_0+</td>
<td>Input</td>
<td>Cell 0 positve terminal</td>
</tr>
<tr class="row-even"><td>3</td>
<td>CELL_2+</td>
<td>Input</td>
<td>Cell 2 positve terminal</td>
</tr>
<tr class="row-odd"><td>4</td>
<td>CELL_4+</td>
<td>Input</td>
<td>Cell 4 positve terminal</td>
</tr>
<tr class="row-even"><td>5</td>
<td>CELL_6+</td>
<td>Input</td>
<td>Cell 6 positve terminal</td>
</tr>
<tr class="row-odd"><td>6</td>
<td>CELL_8+</td>
<td>Input</td>
<td>Cell 8 positve terminal</td>
</tr>
<tr class="row-even"><td>7</td>
<td>CELL_10+</td>
<td>Input</td>
<td>Cell 10 positve terminal</td>
</tr>
<tr class="row-odd"><td>8</td>
<td>VBAT+</td>
<td>Input</td>
<td>Battery module positive terminal</td>
</tr>
<tr class="row-even"><td>9</td>
<td>NC</td>
<td>–</td>
<td>–</td>
</tr>
<tr class="row-odd"><td>10</td>
<td>NC</td>
<td>–</td>
<td>–</td>
</tr>
<tr class="row-even"><td>11</td>
<td>NC</td>
<td>–</td>
<td>–</td>
</tr>
<tr class="row-odd"><td>12</td>
<td>NC</td>
<td>–</td>
<td>–</td>
</tr>
<tr class="row-even"><td>13</td>
<td>CELL_0-</td>
<td>Input</td>
<td>Cell 0 negative terminal</td>
</tr>
<tr class="row-odd"><td>14</td>
<td>CELL_1+</td>
<td>Input</td>
<td>Cell 1 positive terminal</td>
</tr>
<tr class="row-even"><td>15</td>
<td>CELL_3+</td>
<td>Input</td>
<td>Cell 3 positive terminal</td>
</tr>
<tr class="row-odd"><td>16</td>
<td>CELL_5+</td>
<td>Input</td>
<td>Cell 5 positive terminal</td>
</tr>
<tr class="row-even"><td>17</td>
<td>CELL_7+</td>
<td>Input</td>
<td>Cell 7 positive terminal</td>
</tr>
<tr class="row-odd"><td>18</td>
<td>CELL_9+</td>
<td>Input</td>
<td>Cell 9 positive terminal</td>
</tr>
<tr class="row-even"><td>19</td>
<td>CELL_11+</td>
<td>Input</td>
<td>Cell 11 positive terminal</td>
</tr>
<tr class="row-odd"><td>20</td>
<td>NC</td>
<td>–</td>
<td>–</td>
</tr>
<tr class="row-even"><td>21</td>
<td>NC</td>
<td>–</td>
<td>–</td>
</tr>
<tr class="row-odd"><td>22</td>
<td>NC</td>
<td>–</td>
<td>–</td>
</tr>
<tr class="row-even"><td>23</td>
<td>NC</td>
<td>–</td>
<td>–</td>
</tr>
<tr class="row-odd"><td>24</td>
<td>NC</td>
<td>–</td>
<td>–</td>
</tr>
</tbody>
</table>
<p>Each of these lines is protected by a 250mA fast fuse surface mount device (F402 - F414) on the board except of the VBAT+ and VBAT- lines which are protected by a value of 500mA (F401 and F415). This is especially important for a test environment. The VBAT+ and VBAT- connections are used for the internal power supply of the BMS-Slave Board board. If the battery module does not contain these separate wires to the positive and negative module terminals, the solder jumpers SJ401 and SJ402 have to be shorted. In this case the power required by the BMS-Slave Board will be supplied through the sense lines CELL_0- and CELL_11+. Running the BMS-Slave Board in this configuration could result in cell measurement errors due to voltage drop over the sense wires.</p>
<p>The cell input lines are filtered by a grounded or differential capacitor filter: both possibilities are provided on the PCB of the BMS-Slave Board. More information on the corner frequency of this filtering can be found in the schematic. The grounded capacitor filter should be used in environments affected with a high noise as it offers a high level of battery voltage ripple rejection. The differential capacitor filter can be used when noise is less occurrent or the design is subjected to cost optimization.</p>
</div>
<div class="section" id="passive-cell-balancing">
<h3>3.2.2. Passive Cell Balancing<a class="headerlink" href="#passive-cell-balancing" title="Permalink to this headline">¶</a></h3>
<p>The passive balancing circuit is realized by a parallel connection of two 68Ω discharge resistors that can be connected to each single cell in parallel. The MOSFET switches (T701 - T712) that control the connection to the cells are controlled by the primary LTC6804-1/LTC6811-1 monitoring IC. The secondary LTC6804-1/LTC6811-1 does not support balancing. The resistor value of 2x 68Ω results in a balancing current of about 100mA at a cell voltage of 3.6V. This current results in a power dissipation of about 0.36W per balancing channel (at 3.6V).</p>
</div>
<div class="section" id="global-cell-balancing-feedback">
<h3>3.2.3. Global Cell Balancing Feedback<a class="headerlink" href="#global-cell-balancing-feedback" title="Permalink to this headline">¶</a></h3>
<p>In order to check the proper function of the balancing process or to detect a malfunction in the balancing circuit, a global balancing feedback signal is connected to the LTC6804-1/LTC6811-1. This allows the BMS-Master Board to check wheather any balancing action is currently taking place. The feedback signal is connected to the GPIO3 of the LTC6804-1/LTC6811-1. The signal remains in a logic zero state until any balancing action on at least one cell in the module starts.</p>
</div>
<div class="section" id="temperature-sensor-measurement">
<h3>3.2.4. Temperature Sensor Measurement<a class="headerlink" href="#temperature-sensor-measurement" title="Permalink to this headline">¶</a></h3>
<p>The cell temperature sensors are connected to the connectors X1506 (primary) and X1507 (secondary). The pinout is identical for the primary and secondary and is described in the table below.</p>
<div class="figure">
<a class="reference internal image-reference" href="../../_images/sixteencon.png"><img alt="../../_images/sixteencon.png" src="../../_images/sixteencon.png" style="width: 30%;" /></a>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="8%" />
<col width="25%" />
<col width="23%" />
<col width="45%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Pin</th>
<th class="head">Signal</th>
<th class="head">Direction</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>1</td>
<td>T-SENSOR_0</td>
<td>Input</td>
<td>NTC Sensor 0 terminal 1</td>
</tr>
<tr class="row-odd"><td>2</td>
<td>T-SENSOR_1</td>
<td>Input</td>
<td>NTC Sensor 1 terminal 1</td>
</tr>
<tr class="row-even"><td>3</td>
<td>T-SENSOR_2</td>
<td>Input</td>
<td>NTC Sensor 2 terminal 1</td>
</tr>
<tr class="row-odd"><td>4</td>
<td>T-SENSOR_3</td>
<td>Input</td>
<td>NTC Sensor 3 terminal 1</td>
</tr>
<tr class="row-even"><td>5</td>
<td>T-SENSOR_4</td>
<td>Input</td>
<td>NTC Sensor 4 terminal 1</td>
</tr>
<tr class="row-odd"><td>6</td>
<td>T-SENSOR_5</td>
<td>Input</td>
<td>NTC Sensor 5 terminal 1</td>
</tr>
<tr class="row-even"><td>7</td>
<td>T-SENSOR_6</td>
<td>Input</td>
<td>NTC Sensor 6 terminal 1</td>
</tr>
<tr class="row-odd"><td>8</td>
<td>T-SENSOR_7</td>
<td>Input</td>
<td>NTC Sensor 7 terminal 1</td>
</tr>
<tr class="row-even"><td>9</td>
<td>FUSED_VBAT-</td>
<td>Input</td>
<td>NTC Sensor 0 terminal 2</td>
</tr>
<tr class="row-odd"><td>10</td>
<td>FUSED_VBAT-</td>
<td>Input</td>
<td>NTC Sensor 1 terminal 2</td>
</tr>
<tr class="row-even"><td>11</td>
<td>FUSED_VBAT-</td>
<td>Input</td>
<td>NTC Sensor 2 terminal 2</td>
</tr>
<tr class="row-odd"><td>12</td>
<td>FUSED_VBAT-</td>
<td>Input</td>
<td>NTC Sensor 3 terminal 2</td>
</tr>
<tr class="row-even"><td>13</td>
<td>FUSED_VBAT-</td>
<td>Input</td>
<td>NTC Sensor 4 terminal 2</td>
</tr>
<tr class="row-odd"><td>14</td>
<td>FUSED_VBAT-</td>
<td>Input</td>
<td>NTC Sensor 5 terminal 2</td>
</tr>
<tr class="row-even"><td>15</td>
<td>FUSED_VBAT-</td>
<td>Input</td>
<td>NTC Sensor 6 terminal 2</td>
</tr>
<tr class="row-odd"><td>16</td>
<td>FUSED_VBAT-</td>
<td>Input</td>
<td>NTC Sensor 7 terminal 2</td>
</tr>
</tbody>
</table>
<p>Standard 10kΩ NTC resistors (e.g., Farnell-Nr. 1299926) are recommended for use. When using other values than these, the series resistors (R901-R908 / R1001-R1008) on the board may have to be adjusted. Please note that the accuracy of the internal voltage reference VREF2 decreases heavily with a load of over 3mA. Using 8x 10kΩ NTC resistors with the corresponding 10kΩ series resistors results in a current of 1.2mA (at 20°C) which is drawn from VREF2.</p>
<p>Each of the 8 temperture sensors are connected to an analog multiplexer. The analog multiplexer can be controlled via I²C by the LTC6804-1/LTC6811-1 (7-bit address: 0x4C). In order to ensure fast settling times after swiching the multiplexer input, the output signal of the multiplexer is buffered by an operational amplifier. Finally the analog voltage of the selected sensor is measured on the GPIO1 pin of the LTC6804-1/LTC6811-1.</p>
</div>
<div class="section" id="on-board-eeprom">
<h3>3.2.5. On-board EEPROM<a class="headerlink" href="#on-board-eeprom" title="Permalink to this headline">¶</a></h3>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The BMS-Slave Board hardware versions <code class="docutils literal"><span class="pre">2.1.0</span></code> and above use a different EEPROM IC (ST M24M02) than all other previous hardware versions.</p>
</div>
<p>The primary as well as the secondary unit of the BMS-Slave Board board is equipped with an EEPROM (IC1301 / IC1401). The EEPROM for example can be used for storing data such as calibration values or minimum and maximum temperatures seens by the module during its lifetime. Similar to the analog multiplexers, the EEPROM device is connected to the I²C bus of the LTC6804-1/LTC6811-1 (7-bit address: 0x50).</p>
</div>
<div class="section" id="on-board-ambient-temperature-sensor">
<h3>3.2.6. On-board Ambient Temperature Sensor<a class="headerlink" href="#on-board-ambient-temperature-sensor" title="Permalink to this headline">¶</a></h3>
<p>For an additional monitoring of the ambient temperature an on-board temperature sensor is used. This temperature sensor can be read by the LTC6804-1/LTC6811-1 viathe I²C bus (7-bit address: 0x48). It is possible to program an alert temperature level. Once the measured temperature reaches this alert temperature level, the alert pin of the IC is set to a logic low level. Currently, this signal is not used on the BMS-Slave Board board, but it is accessible on the connector X1508.</p>
</div>
<div class="section" id="additional-inputs-and-outputs">
<h3>3.2.7. Additional Inputs and Outputs<a class="headerlink" href="#additional-inputs-and-outputs" title="Permalink to this headline">¶</a></h3>
<p>Several additional analog and digital inputs and outputs are provided on the BMS-Slave Board board via pin headers. Each 16 analog inputs are provided on connector X1501 (primary) and X1502 (secondary). The pinout for the connectors for the primary and secondary unit is identical and is described in the table below.</p>
<table border="1" class="docutils">
<colgroup>
<col width="7%" />
<col width="22%" />
<col width="21%" />
<col width="50%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Pin</th>
<th class="head">Signal</th>
<th class="head">Direction</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>1</td>
<td>ANALOG-IN_0</td>
<td>Input</td>
<td>Analog input 0</td>
</tr>
<tr class="row-odd"><td>2</td>
<td>ANALOG-IN_1</td>
<td>Input</td>
<td>Analog input 1</td>
</tr>
<tr class="row-even"><td>3</td>
<td>ANALOG-IN_2</td>
<td>Input</td>
<td>Analog input 2</td>
</tr>
<tr class="row-odd"><td>4</td>
<td>ANALOG-IN_3</td>
<td>Input</td>
<td>Analog input 3</td>
</tr>
<tr class="row-even"><td>5</td>
<td>ANALOG-IN_4</td>
<td>Input</td>
<td>Analog input 4</td>
</tr>
<tr class="row-odd"><td>6</td>
<td>ANALOG-IN_5</td>
<td>Input</td>
<td>Analog input 5</td>
</tr>
<tr class="row-even"><td>7</td>
<td>ANALOG-IN_6</td>
<td>Input</td>
<td>Analog input 6</td>
</tr>
<tr class="row-odd"><td>8</td>
<td>ANALOG-IN_7</td>
<td>Input</td>
<td>Analog input 7</td>
</tr>
<tr class="row-even"><td>9</td>
<td>ANALOG-IN_8</td>
<td>Input</td>
<td>Analog input 8</td>
</tr>
<tr class="row-odd"><td>10</td>
<td>ANALOG-IN_9</td>
<td>Input</td>
<td>Analog input 9</td>
</tr>
<tr class="row-even"><td>11</td>
<td>ANALOG-IN_10</td>
<td>Input</td>
<td>Analog input 10</td>
</tr>
<tr class="row-odd"><td>12</td>
<td>ANALOG-IN_11</td>
<td>Input</td>
<td>Analog input 11</td>
</tr>
<tr class="row-even"><td>13</td>
<td>ANALOG-IN_12</td>
<td>Input</td>
<td>Analog input 12</td>
</tr>
<tr class="row-odd"><td>14</td>
<td>ANALOG-IN_13</td>
<td>Input</td>
<td>Analog input 13</td>
</tr>
<tr class="row-even"><td>15</td>
<td>ANALOG-IN_14</td>
<td>Input</td>
<td>Analog input 14</td>
</tr>
<tr class="row-odd"><td>16</td>
<td>ANALOG-IN_15</td>
<td>Input</td>
<td>Analog input 15</td>
</tr>
<tr class="row-even"><td>17</td>
<td>+3.0V_VREF2</td>
<td>Output</td>
<td>LTC6804-1/LTC6811-1 3.0V voltage reference</td>
</tr>
<tr class="row-odd"><td>18</td>
<td>FUSED_VBAT-</td>
<td>Output</td>
<td>GND</td>
</tr>
</tbody>
</table>
<p>Each 8 analog inputs are connected to an analog multiplexer. The analog multiplexers can be controlled via I²C by the LTC6804-1/LTC6811-1 (7-bit addresses: 0x4D and 0x4E). In order to ensure fast settling times after swiching the multiplexer input, the output signals of the multiplexers are buffered by operational amplifiers. Finally the analog voltage of the selected sensor can be measured on the GPIO2 pin of the LTC6804-1/LTC6811-1.</p>
<p>Each 8 digital inputs/outputs are provided on the connectors X1504 (primary) and X1505 (secondary). The pinout for the connectors for the primary and secondary unit is identical and is described in the table below.</p>
<table border="1" class="docutils">
<colgroup>
<col width="7%" />
<col width="22%" />
<col width="21%" />
<col width="50%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Pin</th>
<th class="head">Signal</th>
<th class="head">Direction</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>1</td>
<td>DIGITAL-IO_0</td>
<td>Input/Output</td>
<td>Digital input/output 0</td>
</tr>
<tr class="row-odd"><td>2</td>
<td>DIGITAL-IO_1</td>
<td>Input/Output</td>
<td>Digital input/output 1</td>
</tr>
<tr class="row-even"><td>3</td>
<td>DIGITAL-IO_2</td>
<td>Input/Output</td>
<td>Digital input/output 2</td>
</tr>
<tr class="row-odd"><td>4</td>
<td>DIGITAL-IO_3</td>
<td>Input/Output</td>
<td>Digital input/output 3</td>
</tr>
<tr class="row-even"><td>5</td>
<td>DIGITAL-IO_4</td>
<td>Input/Output</td>
<td>Digital input/output 4</td>
</tr>
<tr class="row-odd"><td>6</td>
<td>DIGITAL-IO_5</td>
<td>Input/Output</td>
<td>Digital input/output 5</td>
</tr>
<tr class="row-even"><td>7</td>
<td>DIGITAL-IO_6</td>
<td>Input/Output</td>
<td>Digital input/output 6</td>
</tr>
<tr class="row-odd"><td>8</td>
<td>+5.0V_VREG</td>
<td>Output</td>
<td>LTC6804-1/LTC6811-1 5.0V regulated voltage</td>
</tr>
<tr class="row-even"><td>9</td>
<td>FUSED_VBAT-</td>
<td>Output</td>
<td>GND</td>
</tr>
</tbody>
</table>
<p>Each 8 digital inputs/outputs are connected to an I²C controlled port expander (7-bit address: 0x20). The direction of the inputs/outputs as well as the logiclevels on the pins can be selected by register settings. Each of the 8 digital inputs/outputs has a discrete pull up resistor that for example can be used for directly connecting a tactile switch.</p>
</div>
<div class="section" id="isospi-daisy-chain-connection">
<h3>3.2.8. isoSPI Daisy Chain Connection<a class="headerlink" href="#isospi-daisy-chain-connection" title="Permalink to this headline">¶</a></h3>
<p>The data transmission between the slaves and between the slaves and the basic board takes place using the isoSPI interface. The isoSPI signals are input onthe connectors X1509 (primary) and X1511 (secondary). The isoSPI signals for daisy-chaining are output on the connectors X1510 (primary) and X1512 (secondary). The isoSPI connections are isolated galvanically using pulse transformers (TR201 / TR301). The voltage amplitude of the differential signal can be adjusted by setting resistors (see section <a class="reference internal" href="#hw-slave-daisy-current-12cell"><span class="std std-ref">Daisy Chain Communication Current</span></a>).</p>
<p>The pinout of the isoSPI connectors is described in <a class="reference internal" href="#daisy-input-connectors"><span class="std std-numref">table 3.1</span></a> and <a class="reference internal" href="#daisy-output-connectors"><span class="std std-numref">table 3.2</span></a>.</p>
<div class="figure">
<a class="reference internal image-reference" href="../../_images/twocon.png"><img alt="../../_images/twocon.png" src="../../_images/twocon.png" style="width: 5%;" /></a>
</div>
<span id="daisy-input-connectors"></span><table border="1" class="docutils" id="id2">
<caption><span class="caption-number">Table 3.1 </span><span class="caption-text">isoSPI Daisy Chain Input Connectors</span><a class="headerlink" href="#id2" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="30%" />
<col width="70%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Connector Pin</th>
<th class="head">Daisy Chain</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>1</td>
<td>IN+ (Primary/Secondary LTC6804-1/LTC6811-1)</td>
</tr>
<tr class="row-odd"><td>2</td>
<td>IN- (Primary/Secondary LTC6804-1/LTC6811-1)</td>
</tr>
</tbody>
</table>
<span id="daisy-output-connectors"></span><table border="1" class="docutils" id="id3">
<caption><span class="caption-number">Table 3.2 </span><span class="caption-text">isoSPI Daisy Chain Output Connectors</span><a class="headerlink" href="#id3" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="30%" />
<col width="70%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Connector Pin</th>
<th class="head">Daisy Chain</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>1</td>
<td>OUT+ (Primary/Secondary LTC6804-1/LTC6811-1)</td>
</tr>
<tr class="row-odd"><td>2</td>
<td>OUT- (Primary/Secondary LTC6804-1/LTC6811-1)</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="hardware-settings-options">
<h3>3.2.9. Hardware Settings / Options<a class="headerlink" href="#hardware-settings-options" title="Permalink to this headline">¶</a></h3>
<div class="section" id="software-timer">
<h4>3.2.9.1. Software Timer<a class="headerlink" href="#software-timer" title="Permalink to this headline">¶</a></h4>
<p>The internal software timer of the LTC6804-1/LTC6811-1 can be enabled/disabled by a dedicated external pin (SWTEN, pin 36). In order to support all features, the BMS-Slave Board board offers a possibility to switch the software timer. The software timer is disabled in the standard configuration, which means pin 36 is pulled to GND via a zero-ohm resistor (R219/R319). The timer can be enabled by removing the resistor R219/R319 and placing a zero-ohm resistor to R220/R320.</p>
</div>
<div class="section" id="daisy-chain-communication-current">
<span id="hw-slave-daisy-current-12cell"></span><h4>3.2.9.2. Daisy Chain Communication Current<a class="headerlink" href="#daisy-chain-communication-current" title="Permalink to this headline">¶</a></h4>
<p>The daisy chain communication current can be set by the resisitors R205/R305 and R207/R307. The default value is 820Ω for R205/R305 and 1.21kΩ for R207/R307. This values result in a bias current of approximately 1mA and a differential signal amplitude of 1.18V. Theses values are suitable for high noise environments with cable lengths of over 50m. More information can be found in the LTC6804-1/LTC6811-1 datasheet.</p>
</div>
<div class="section" id="status-led">
<h4>3.2.9.3. Status LED<a class="headerlink" href="#status-led" title="Permalink to this headline">¶</a></h4>
<p>The status LEDs LD201 and LD301 show the current mode of each, the primary and secondary LTC6804-1/LTC6811-1. The LED is on in STANDBY, REFUP or MEASURE mode, whereas the LED is off in SLEEP mode. The LED can be disabled by removing the resistor R205 (primary) or R305 (secondary).</p>
</div>
<div class="section" id="gpio-extension-connector">
<h4>3.2.9.4. GPIO Extension Connector<a class="headerlink" href="#gpio-extension-connector" title="Permalink to this headline">¶</a></h4>
<p>The internal GPIO lines of the primary or secondary LTC6804-1/LTC6811-1 can be connected to the GPIO extension pin header X1508 via optional zero-ohm resistors. In the standard configuration these resistors are not placed. Of course it is possible to place each both resistors for a parallel connection of the internal signals to the GPIO extension connector. For more information see page 2/3 of the schematic file. The placement of the resistors and the resulting connection is shown in the table below.</p>
<table border="1" class="docutils">
<colgroup>
<col width="8%" />
<col width="40%" />
<col width="53%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GPIO</th>
<th class="head">connect to pin header</th>
<th class="head">connect to internal function</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>1</td>
<td>R209/R309</td>
<td>R208/R308 (default)</td>
</tr>
<tr class="row-odd"><td>2</td>
<td>R211/R311</td>
<td>R210/R310 (default)</td>
</tr>
<tr class="row-even"><td>3</td>
<td>R213/R313</td>
<td>R212/R312 (default)</td>
</tr>
<tr class="row-odd"><td>4</td>
<td>R215/R315</td>
<td>R214/R314 (default)</td>
</tr>
<tr class="row-even"><td>5</td>
<td>R217/R317</td>
<td>R216/R316 (default)</td>
</tr>
</tbody>
</table>
<p>The pinout of the extension connector X1508 is described below:</p>
<table border="1" class="docutils">
<colgroup>
<col width="5%" />
<col width="26%" />
<col width="16%" />
<col width="53%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Pin</th>
<th class="head">Signal</th>
<th class="head">Direction</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>1</td>
<td>+3.0V_VREF2_0</td>
<td>Output</td>
<td>Primary LTC6804-1/LTC6811-1 3.0V reference voltage 2</td>
</tr>
<tr class="row-odd"><td>2</td>
<td>+3.0V_VREF2_1</td>
<td>Output</td>
<td>Secondary LTC6804-1/LTC6811-1 3.0V reference voltage 2</td>
</tr>
<tr class="row-even"><td>3</td>
<td>+5.0V_VREG_0</td>
<td>Output</td>
<td>Primary LTC6804-1/LTC6811-1 5.0V regulated voltage</td>
</tr>
<tr class="row-odd"><td>4</td>
<td>+5.0V_VREG_1</td>
<td>Output</td>
<td>Secondary LTC6804-1/LTC6811-1 5.0V regulated voltage</td>
</tr>
<tr class="row-even"><td>5</td>
<td>PRIMARY-GPIO1-OPT</td>
<td>Input/Output</td>
<td>Primary LTC6804-1/LTC6811-1 GPIO1</td>
</tr>
<tr class="row-odd"><td>6</td>
<td>SECONDARY-GPIO1-OPT</td>
<td>Input/Output</td>
<td>Secondary LTC6804-1/LTC6811-1 GPIO1</td>
</tr>
<tr class="row-even"><td>7</td>
<td>PRIMARY-GPIO2-OPT</td>
<td>Input/Output</td>
<td>Primary LTC6804-1/LTC6811-1 GPIO2</td>
</tr>
<tr class="row-odd"><td>8</td>
<td>SECONDARY-GPIO2-OPT</td>
<td>Input/Output</td>
<td>Secondary LTC6804-1/LTC6811-1 GPIO2</td>
</tr>
<tr class="row-even"><td>9</td>
<td>PRIMARY-GPIO3-OPT</td>
<td>Input/Output</td>
<td>Primary LTC6804-1/LTC6811-1 GPIO3</td>
</tr>
<tr class="row-odd"><td>10</td>
<td>SECONDARY-GPIO3-OPT</td>
<td>Input/Output</td>
<td>Secondary LTC6804-1/LTC6811-1 GPIO3</td>
</tr>
<tr class="row-even"><td>11</td>
<td>PRIMARY-GPIO4-OPT</td>
<td>Input/Output</td>
<td>Primary LTC6804-1/LTC6811-1 GPIO4</td>
</tr>
<tr class="row-odd"><td>12</td>
<td>SECONDARY-GPIO4-OPT</td>
<td>Input/Output</td>
<td>Secondary LTC6804-1/LTC6811-1 GPIO4</td>
</tr>
<tr class="row-even"><td>13</td>
<td>PRIMARY-GPIO5-OPT</td>
<td>Input/Output</td>
<td>Primary LTC6804-1/LTC6811-1 GPIO5</td>
</tr>
<tr class="row-odd"><td>14</td>
<td>SECONDARY-GPIO5-OPT</td>
<td>Input/Output</td>
<td>Secondary LTC6804-1/LTC6811-1 GPIO5</td>
</tr>
<tr class="row-even"><td>15</td>
<td>PRIMARY-WDT</td>
<td>Output</td>
<td>Primary LTC6804-1/LTC6811-1 watchdog output</td>
</tr>
<tr class="row-odd"><td>16</td>
<td>SECONDARY-WDT</td>
<td>Output</td>
<td>Secondary LTC6804-1/LTC6811-1 watchdog output</td>
</tr>
<tr class="row-even"><td>17</td>
<td>PRIMARY-TEMP-ALERT</td>
<td>Output</td>
<td>Primary board T-sensor alarm output</td>
</tr>
<tr class="row-odd"><td>18</td>
<td>SECONDARY-TEMP-ALERT</td>
<td>Output</td>
<td>Secondary board T-sensor alarm output</td>
</tr>
<tr class="row-even"><td>19</td>
<td>FUSED_VBAT-</td>
<td>Output</td>
<td>GND</td>
</tr>
<tr class="row-odd"><td>20</td>
<td>FUSED_VBAT-</td>
<td>Output</td>
<td>GND</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="external-isolated-dc-supply">
<h3>3.2.10. External Isolated DC-Supply<a class="headerlink" href="#external-isolated-dc-supply" title="Permalink to this headline">¶</a></h3>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The external isolated DC-supply is only available in the BMS-Slave Board hardware versions <code class="docutils literal"><span class="pre">2.1.0</span></code> and above.</p>
</div>
<p>It is possible to supply the BMS-Slave Board by an external DC power supply with a voltage range of 8V to 24V. The DC input is protected against reverse voltage and overcurrent (with a 1.25A fuse). The external DC supply has to be connected on connector X1513 or X1514 (both connectors are in parallel for daisy chaining the supply). The pinout of the connectors X1513 and X1514 is shown below:</p>
<div class="figure">
<a class="reference internal image-reference" href="../../_images/twocon.png"><img alt="../../_images/twocon.png" src="../../_images/twocon.png" style="width: 5%;" /></a>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="8%" />
<col width="25%" />
<col width="23%" />
<col width="45%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Pin</th>
<th class="head">Signal</th>
<th class="head">Direction</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>1</td>
<td>DC+</td>
<td>Input</td>
<td>positive supply terminal</td>
</tr>
<tr class="row-odd"><td>2</td>
<td>DC-</td>
<td>Input</td>
<td>negative supply terminal</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../slave_v1.x/slave_12cell_v1_x.html" class="btn btn-neutral float-right" title="4. Slave 12-Cell v1.x.x" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../overview/overview.html" class="btn btn-neutral" title="2. Hardware Overview" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2010–2017, Fraunhofer-Gesellschaft zur Förderung der angewandten Forschung e.V. All rights reserved. See license section for further information.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'1.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>