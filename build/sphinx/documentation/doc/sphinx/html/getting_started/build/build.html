

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>3. Building the foxBMS Software and Documentation &mdash; foxBMS 1.0 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../../_static/foxbms-icon.ico"/>
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../../genindex.html"/>
        <link rel="search" title="Search" href="../../search.html"/>
    <link rel="top" title="foxBMS 1.0 documentation" href="../../index.html"/>
        <link rel="next" title="4. Eclipse Workspace Setup and Flashing" href="../eclipse_workspace/eclipse_workspace.html"/>
        <link rel="prev" title="2. Installing foxConda" href="../foxconda/foxconda.html"/> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html" class="icon icon-home"> foxBMS
          

          
            
            <img src="../../_static/foxbms250px.png" class="logo" />
          
          </a>

          
            
            
              <div class="version">
                1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">General Information</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../general_information/releases/releases.html">1. Releases</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../general_information/roadmap/roadmap.html">2. Roadmap</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../general_information/overview/overview.html">3. Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../general_information/motivation/motivation.html">4. Motivation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../general_information/safety/safety.html">5. Safety</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../general_information/licenses/licenses.html">6. Licenses</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../general_information/team/team.html">7. Team</a></li>
</ul>
<p class="caption"><span class="caption-text">Getting Started</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../general/general.html">1. Getting Started with foxBMS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../foxconda/foxconda.html">2. Installing foxConda</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">3. Building the foxBMS Software and Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../eclipse_workspace/eclipse_workspace.html">4. Eclipse Workspace Setup and Flashing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cabling/cabling.html">5. Cabling foxBMS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../connectors/connectors.html">6. Connectors Pinout</a></li>
<li class="toctree-l1"><a class="reference internal" href="../communicating/communicating.html">7. Communicating with foxBMS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../checking/checking.html">8. Checking-up foxBMS</a></li>
</ul>
<p class="caption"><span class="caption-text">Hardware Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../hardware_documentation/specifications/specifications.html">1. Hardware Specifications</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../hardware_documentation/overview/overview.html">2. Hardware Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../hardware_documentation/slave_v2.x/slave_12cell_v2_x.html">3. Slave 12-Cell v2.x.x</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../hardware_documentation/slave_v1.x/slave_12cell_v1_x.html">4. Slave 12-Cell v1.x.x</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../hardware_documentation/design_resources/design_resources.html">5. Hardware Design Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../hardware_documentation/components/components.html">6. Hardware Safety Components</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../hardware_documentation/bjb/bjb.html">7. Battery Junction Box</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../hardware_documentation/toolchain/toolchain.html">8. Hardware Toolchain</a></li>
</ul>
<p class="caption"><span class="caption-text">Software Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../software_documentation/components/components.html">1. Software Components</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../software_documentation/overview/overview.html">2. Software Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../software_documentation/defines/defines.html">3. Important Switches in Code</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../software_documentation/modules/modules.html">4. Software Modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../software_documentation/tools/tools.html">5. Software Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../software_documentation/build-process/build-process.html">6. Build Process</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../software_documentation/styleguide/styleguide.html">7. Software Style Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../software_documentation/faq/faq.html">8. Software FAQ and HOWTOs</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">foxBMS</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
      <li>3. Building the foxBMS Software and Documentation</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/getting_started/build/build.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="building-the-foxbms-software-and-documentation">
<span id="getting-started-build"></span><h1>3. Building the foxBMS Software and Documentation<a class="headerlink" href="#building-the-foxbms-software-and-documentation" title="Permalink to this headline">¶</a></h1>
<div class="section" id="requirements">
<h2>3.1. Requirements<a class="headerlink" href="#requirements" title="Permalink to this headline">¶</a></h2>
<p>The build process of foxBMS heavily depends on Python, for example, for code generation purposes. foxBMS hence comes with its own Python distribution, called foxConda, powered by <a class="reference external" href="https://continuum.io">Anaconda</a>. These build instructions assume that foxConda was successfully installed and that the <code class="docutils literal"><span class="pre">PATH</span></code> environment has been adjusted accordingly. For further information refer to the foxConda documentation (<a class="reference internal" href="../foxconda/foxconda.html#getting-started-foxconda"><span class="std std-ref">Installing foxConda</span></a>).</p>
</div>
<div class="section" id="obtaining-the-sources">
<h2>3.2. Obtaining the Sources<a class="headerlink" href="#obtaining-the-sources" title="Permalink to this headline">¶</a></h2>
<p>Obtaining the sources can be achieved in two ways, one involving the commandline and one manually downloading the repositories form the foxBMS GitHub page at <a class="reference external" href="https://github.com/foxBMS/">github.com/foxBMS/</a>.</p>
<p>The command line version is prefered, as this is more easy.</p>
<blockquote>
<div><ol class="arabic">
<li><p class="first">Using the commandline: There are two possibilties</p>
<blockquote>
<div><ol class="arabic simple">
<li>The repository <code class="docutils literal"><span class="pre">foxbms-setup</span></code> has not been cloned yet:<ol class="arabic">
<li>Open <code class="docutils literal"><span class="pre">fbterminal</span></code> from <code class="docutils literal"><span class="pre">path/to/foxconda/Scripts/fbterminal.exe</span></code></li>
<li><code class="docutils literal"><span class="pre">cd</span></code> to the directory the foxBMS project should be setup</li>
<li>Run <code class="docutils literal"><span class="pre">ghloader</span> <span class="pre">-u</span> <span class="pre">https://github.com/foxBMS/foxBMS-setup.git</span> <span class="pre">--script</span> <span class="pre">bootstrap.py</span></code></li>
<li>The <code class="docutils literal"><span class="pre">foxbms-setup</span></code> repository is cloned onto the harddrive and the bootsrap script is run. This will clone all needed repositories, including the setup repository itself to the correct location and build  the documentation. The general foxBMS documentation can then be found at <code class="docutils literal"><span class="pre">foxbms-setup\build\sphinx\documentation\doc\sphinx\html\index.html</span></code></li>
</ol>
</li>
<li>The repository <code class="docutils literal"><span class="pre">foxbms-setup</span></code> was already cloned somewhere to the local harddrive:<ol class="arabic">
<li>Open <code class="docutils literal"><span class="pre">fbterminal</span></code> from <code class="docutils literal"><span class="pre">path/to/foxconda/Scripts/fbterminal.exe</span></code></li>
<li><code class="docutils literal"><span class="pre">cd</span></code> to the directory where <code class="docutils literal"><span class="pre">foxbms-setup</span></code> was cloned to</li>
<li>Run <code class="docutils literal"><span class="pre">python</span> <span class="pre">bootstrap.py</span></code>. This will clone all further needed repositories to the correct location and build  the documentation. The general foxBMS documentation can then be found at <code class="docutils literal"><span class="pre">foxbms-setup\build\sphinx\documentation\doc\sphinx\html\index.html</span></code></li>
</ol>
</li>
</ol>
</div></blockquote>
</li>
<li><p class="first">Downloading the repositories manually</p>
<ol class="arabic simple">
<li>Goto <a class="reference external" href="https://github.com/foxBMS/">github.com/foxBMS/</a> and download the following repositories, either using a git client or as <code class="docutils literal"><span class="pre">zip</span></code>-files. If they were downloaded as <code class="docutils literal"><span class="pre">zip</span></code>-files, it will not be possible to update of the repositories. Additionally the repositories inside the <code class="docutils literal"><span class="pre">zip</span></code>-files will have a naming like <code class="docutils literal"><span class="pre">{{repositoryname}}-master</span></code>. These must be renamed to <code class="docutils literal"><span class="pre">{{repositoryname}}</span></code>.<ol class="arabic">
<li><a class="reference external" href="https://github.com/foxBMS/foxbms-setup">github.com/foxBMS/foxbms-setup</a></li>
<li><a class="reference external" href="https://github.com/foxBMS/mcu-common">github.com/foxBMS/mcu-common</a></li>
<li><a class="reference external" href="https://github.com/foxBMS/mcu-freertos">github.com/foxBMS/mcu-freertos</a></li>
<li><a class="reference external" href="https://github.com/foxBMS/mcu-hal">github.com/foxBMS/mcu-hal</a></li>
<li><a class="reference external" href="https://github.com/foxBMS/mcu-primary">github.com/foxBMS/mcu-primary</a></li>
<li><a class="reference external" href="https://github.com/foxBMS/mcu-secondary">github.com/foxBMS/mcu-secondary</a></li>
<li><a class="reference external" href="https://github.com/foxBMS/documentation">github.com/foxBMS/documentation</a></li>
<li><a class="reference external" href="https://github.com/foxBMS/hw-extension">github.com/foxBMS/hw-extensions</a></li>
<li><a class="reference external" href="https://github.com/foxBMS/hw-interface-ltc6820">github.com/foxBMS/hw-interface</a></li>
<li><a class="reference external" href="https://github.com/foxBMS/hw-master">github.com/foxBMS/hw-master</a></li>
<li><a class="reference external" href="https://github.com/foxBMS/hw-slave-12-ltc6811-1">github.com/foxBMS/hw-slave-12-ltc6811-1</a></li>
<li><a class="reference external" href="https://github.com/foxBMS/tools">github.com/foxBMS/tools</a></li>
</ol>
</li>
<li>Put the repositories in a structure like it is shown below. This structure is <strong>mandatory</strong>!</li>
</ol>
</li>
</ol>
</div></blockquote>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Do not change directory names or the structure inside <code class="docutils literal"><span class="pre">foxbms-setup</span></code>. If this is changed most, if not all, <code class="docutils literal"><span class="pre">wscripts</span></code>, have to be heavily adpated and this can get very complex extremly fast.</p>
</div>
<p>After that step the directory structure in the <code class="docutils literal"><span class="pre">foxbms-setup</span></code> directory should look like:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>foxbms-setup &lt;dir&gt;
|___.git &lt;dir&gt; (*)
|___build &lt;dir&gt;
|___embedded-software &lt;dir&gt;
|   |___mcu-bootloader &lt;dir&gt;
|   |___mcu-common &lt;dir&gt;
|   |___mcu-freertos &lt;dir&gt;
|   |___mcu-hal &lt;dir&gt;
|   |___mcu-primary &lt;dir&gt;
|   |___mcu-secondary &lt;dir&gt;
|
|___documentation &lt;dir&gt;
|   |___hw-extension
|   |___hw-interface-ltc6820
|   |___hw-master
|   |___hw-slave-12-ltc6811-1
|
|___hardware &lt;dir&gt;
|___tools &lt;dir&gt;
|
|___.gitignore &lt;file&gt; (*)
|___.config.yaml &lt;file&gt; (*)
|___bootstrap.py &lt;file&gt;
|___build.py &lt;file&gt;
|___CHANGELOG.md &lt;file&gt;
|___LICENSE.md &lt;file&gt;
|___README.md &lt;file&gt;
|___wscript &lt;file&gt;
</pre></div>
</div>
<p>(*) Directories and files with starting full stop are hidden in Windows with the default configuration.</p>
</div>
<div class="section" id="building-the-binaries-and-documentation">
<h2>3.3. Building the Binaries and Documentation<a class="headerlink" href="#building-the-binaries-and-documentation" title="Permalink to this headline">¶</a></h2>
<p>foxBMS targets can be build using the command line or using the foxBMS Eclipse workspace. This section describes the build from command line. Details on building the binaries using the Eclipse Workspace can be found in “<a class="reference internal" href="../eclipse_workspace/eclipse_workspace.html#getting-started-eclipse-workspace"><span class="std std-ref">Eclipse Workspace Setup and Flashing</span></a>”.</p>
<p>The script for building targets is found in foxBMS-setup and called <code class="docutils literal"><span class="pre">build.py</span></code>. A help is displayed by running <code class="docutils literal"><span class="pre">python</span> <span class="pre">build.py</span> <span class="pre">-h</span></code>.</p>
<p>In the foxBMS project, several targets can be built. The output is stored in a subdirectory of <code class="docutils literal"><span class="pre">/build</span></code>. These are</p>
<blockquote>
<div><ul class="simple">
<li>Primary MCU:</li>
</ul>
<blockquote>
<div><ul class="simple">
<li>Doxygen documentation</li>
</ul>
<blockquote>
<div><ul class="simple">
<li>This target is built with <code class="docutils literal"><span class="pre">python</span> <span class="pre">build.py</span> <span class="pre">-p</span> <span class="pre">--doxygen</span></code>.</li>
<li>The output directory is <code class="docutils literal"><span class="pre">build/primary/doxygen</span></code>.</li>
<li>The main document of the software documentation is found at <code class="docutils literal"><span class="pre">build\primary\doxygen\html\index.html</span></code>.</li>
</ul>
</div></blockquote>
<ul class="simple">
<li>Binaries</li>
</ul>
<blockquote>
<div><ul class="simple">
<li>This target is built with <code class="docutils literal"><span class="pre">python</span> <span class="pre">build.py</span> <span class="pre">-p</span></code>.</li>
<li>The output directory is <code class="docutils literal"><span class="pre">build/primary/embedded-software</span></code>.</li>
<li>The files generated in the directory <code class="docutils literal"><span class="pre">build/secondary/embedded-software/mcu-secondary/src/general</span></code> are: <code class="docutils literal"><span class="pre">foxbms.elf</span></code>, <code class="docutils literal"><span class="pre">foxbms_flash.bin</span></code>, <code class="docutils literal"><span class="pre">foxbms_flashheader.bin</span></code> and <code class="docutils literal"><span class="pre">foxbms.hex</span></code>.</li>
</ul>
</div></blockquote>
</div></blockquote>
<ul class="simple">
<li>Secondary MCU:</li>
</ul>
<blockquote>
<div><ul class="simple">
<li>Doxygen documentation</li>
</ul>
<blockquote>
<div><ul class="simple">
<li>This target is built with <code class="docutils literal"><span class="pre">python</span> <span class="pre">build.py</span> <span class="pre">-s</span> <span class="pre">--doxygen</span></code>.</li>
<li>The output directory is <code class="docutils literal"><span class="pre">build/secondary/doxygen</span></code>.</li>
<li>The main document of the software documentation is found at <code class="docutils literal"><span class="pre">build\secondary\doxygen\html\index.html</span></code>.</li>
</ul>
</div></blockquote>
<ul class="simple">
<li>Binaries</li>
</ul>
<blockquote>
<div><ul class="simple">
<li>This target is built with <code class="docutils literal"><span class="pre">python</span> <span class="pre">build.py</span> <span class="pre">-s</span></code>.</li>
<li>The output directory is <code class="docutils literal"><span class="pre">build/secondary/embedded-software</span></code>.</li>
<li>The files generated in the directory <code class="docutils literal"><span class="pre">build/secondary/embedded-software/mcu-secondary/src/general</span></code> are: <code class="docutils literal"><span class="pre">foxbms.elf</span></code>, <code class="docutils literal"><span class="pre">foxbms_flash.bin</span></code>, <code class="docutils literal"><span class="pre">foxbms_flashheader.bin</span></code> and <code class="docutils literal"><span class="pre">foxbms.hex</span></code>.</li>
</ul>
</div></blockquote>
</div></blockquote>
<ul class="simple">
<li>General documentation</li>
</ul>
<blockquote>
<div><ul class="simple">
<li>Sphinx documentation</li>
</ul>
<blockquote>
<div><ul class="simple">
<li>This target is built with <code class="docutils literal"><span class="pre">python</span> <span class="pre">build.py</span> <span class="pre">--sphinx</span></code>.</li>
<li>The output directory is <code class="docutils literal"><span class="pre">build/sphinx/</span></code>.</li>
<li>The main document of the software documentation is found in <code class="docutils literal"><span class="pre">build/sphinx/documentation/doc/sphinx/html/index.html</span></code>.</li>
</ul>
</div></blockquote>
</div></blockquote>
</div></blockquote>
</div>
<div class="section" id="cleaning-the-binaries">
<h2>3.4. Cleaning the Binaries<a class="headerlink" href="#cleaning-the-binaries" title="Permalink to this headline">¶</a></h2>
<p>This section describes how to clean from command line. Details on cleaning the binaries using the Eclipse Workspace are found in “<a class="reference internal" href="../eclipse_workspace/eclipse_workspace.html#getting-started-eclipse-workspace"><span class="std std-ref">Eclipse Workspace Setup and Flashing</span></a>”.</p>
<p>Cleaning the targets is done from the foxBMS-setup directory with the <code class="docutils literal"><span class="pre">build.py</span></code> script, using the option <code class="docutils literal"><span class="pre">--clean</span></code>.</p>
<p>The binary targets described in build can be cleaned with the following commands:</p>
<blockquote>
<div><ul class="simple">
<li><code class="docutils literal"><span class="pre">python</span> <span class="pre">build.py</span> <span class="pre">-p</span> <span class="pre">--clean</span></code> cleans the primary binaries and the Doxygen documentation.</li>
<li><code class="docutils literal"><span class="pre">python</span> <span class="pre">build.py</span> <span class="pre">-s</span> <span class="pre">--clean</span></code> cleans the secondary binaries and the Doxygen documentation.</li>
</ul>
</div></blockquote>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../eclipse_workspace/eclipse_workspace.html" class="btn btn-neutral float-right" title="4. Eclipse Workspace Setup and Flashing" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../foxconda/foxconda.html" class="btn btn-neutral" title="2. Installing foxConda" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2010–2017, Fraunhofer-Gesellschaft zur Förderung der angewandten Forschung e.V. All rights reserved. See license section for further information.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'1.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>